<div class="container pb-5">
  <div class="row">
    <div class="col-3 mt-3 pb-5">
      <h3>お買いものリスト</h3>
      <%= link_to "もっと見る", lists_path, class:"btn btn-sm btn-outline-secondary" %>
    </div>
    <div class="col-6 mt-3 pb-5">
      <h3>食材一覧・追加</h3>
        <div>
          <h4>食材の追加</h4>
          <%= form_with model: @food, url: foods_path, local:true do |f| %>
            <%= f.text_field :name, autocomplete: "name",placeholder: '食材名を入力' %>
            <%= f.collection_select :category_id, Category.all, :id, :name, include_blank: "-- カテゴリを選択 --" %>
            <%= f.submit "食材を登録",class:"btn btn-sm btn-outline-secondary" %>
          <% end %>
        </div>
        <div>
          <h4 class="mt-3">食材一覧</h4>
          <p>食材名をクリックすると<br>詳細・編集画面へ</p>
          <% @foods.each do |food| %>
            <table>
              <tbody>
                <tr>
                  <td id="like_btn_<%= food.id %>">
                    <%= render "likes/btn", food: food %>
                  </td>
                  <td>
                    <%#= link_to food_path(food.id) do %>
                      <%#= food.name %>
                    <%# end %>
                    <%= form_with model: @stock, local:true do |f| %>
                    <%= f.hidden_field :food_id, :value => @food.id %>
                      <!--第一引数にオブジェクト名food_id、第二引数部分にvalueで受け渡す値 @food.idを指定-->
                      <!--stock controllerの stocks.find_by(food_id:に送ることができる-->
                      <%= f.label :foods %>
                      <%= collection_check_boxes(:food, :food_ids, Food.all, :id,:name) do |b| %>
                      <%= b.label { b.check_box + b.text } %>
                      <% end %>
                      <%= f.submit "食材をストックへ追加",class:"btn btn-sm btn-outline-secondary" %>
                    <% end %>
                  </td>
                  <td><%#= link_to "ストックに追加", stocks_path, method: :post, class:"btn btn-sm btn-outline-secondary", data:{confirm: "#{food.name}をストックに追加しますか？"} %></td>
                  <td>
                    <%= link_to food_path(food.id),method: :delete, class:"btn btn-sm btn-outline-secondary", data:{confirm: "#{food.name}を削除しますか？"} do %>
                      <i class="fas fa-trash-alt"></i>
                    <% end %>
                  </td>
                </tr>
              </tbody>
            </table>
          <% end %>
        </div>
    </div>
    <div class="col-3 mt-3 pb-5">
      <h3>期限が間近の食材</h3>
    </div>
  </div>
  <div class="row">


  </div>
</div>
